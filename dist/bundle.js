(()=>{"use strict";class t{constructor(t="Untitled",e="",a=new Date,n=!1){this.title=t,this.desc=e,this.date=a,this.done=n}static formatDate(t){return t.toLocaleDateString()}static addCard(e,a="Untitled",n="",o=new Date){const d=new t(a,n,o);e.push(d)}static removeCard(t,e){e>=0&&e<t.length&&t.splice(e,1)}static changeDone(t,e,a){if(e>=0&&e<t.length){const[n]=t.splice(e,1);n.done=!n.done,a.push(n)}}static updateToDoData(t,e,a,n,o){if(e>=0&&e<t.length){const d=t[e];d.title=a,d.desc=n,d.date=new Date(o)}}static saveToLocalStorage(t,e=[]){localStorage.setItem("myToDos",JSON.stringify(t.map((t=>({...t,desc:t.desc.replace(/\n/g,"\\n"),date:t.date.toISOString()}))))),localStorage.setItem("doneToDos",JSON.stringify(e.map((t=>({...t,desc:t.desc.replace(/\n/g,"\\n"),date:t.date.toISOString()})))))}static determineBackgroundColor(t){const e=new Date;e.setHours(0,0,0,0);const a=t.getTime()-e.getTime(),n=Math.floor(a/864e5);return console.log(n),n<-8?"lime":n<=-3&&n>=-7?"yellow":n<=0&&n>=-2?"orange":n>0?"#FF4545":void 0}static printCards(e,a,n,o){n.innerHTML="",o.innerHTML="",e.forEach(((e,a)=>{const o=document.createElement("div");o.classList.add("projectBox"),o.style.backgroundColor=t.determineBackgroundColor(e.date),o.innerHTML=`\n                <div class="title" contenteditable="true" data-index="${a}" data-list="active">\n                    ${e.title}\n                </div>\n                <div class="notes" contenteditable="true" data-index="${a}" data-list="active">\n                    ${e.desc.replace(/\n/g,"<br>")} \x3c!-- Convert \n to <br> --\x3e\n                </div>\n                <input type="date" class="due-date" value="${e.date.toISOString().split("T")[0]}" data-index="${a}" data-list="active">\n                <button class="delete" data-index="${a}" data-list="active">\n                    <span class="material-symbols-outlined small">delete</span>\n                </button>\n                <button class="tick" data-index="${a}" data-list="active">\n                    <span class="material-symbols-outlined small">check</span>\n                </button>\n            `,n.appendChild(o)})),a.forEach(((e,a)=>{const n=document.createElement("div");n.classList.add("projectBox","done"),n.innerHTML=`\n                <div class="title" contenteditable="true" data-index="${a}" data-list="done">\n                    ${e.title}\n                </div>\n                <div class="notes" contenteditable="true" data-index="${a}" data-list="done">\n                    ${e.desc.replace(/\n/g,"<br>")} \x3c!-- Convert \n to <br> --\x3e\n                </div>\n                <div class="due-date" data-index="${a}" data-list="done">\n                    ${t.formatDate(e.date)}\n                </div>\n                <button class="delete" data-index="${a}" data-list="done">\n                    <span class="material-symbols-outlined small">delete</span>\n                </button>\n                <button class="tick" data-index="${a}" data-list="done">\n                    <span class="material-symbols-outlined small">check</span>\n                </button>\n            `,o.appendChild(n)}))}}const e=document.getElementById("c1"),a=document.getElementById("c2"),n=new class{constructor(){this.myToDos=[],this.doneToDos=[],this.loadFromLocalStorage()}loadFromLocalStorage(){const e=localStorage.getItem("myToDos"),a=localStorage.getItem("doneToDos");if(e){const a=JSON.parse(e);this.myToDos=a.map((e=>new t(e.title,e.desc.replace(/\\n/g,"\n"),new Date(e.date),e.done)))}if(a){const e=JSON.parse(a);this.doneToDos=e.map((e=>new t(e.title,e.desc.replace(/\\n/g,"\n"),new Date(e.date),e.done)))}}addNewCard(){t.addCard(this.myToDos),this.updateAndRender()}updateAndRender(){t.saveToLocalStorage(this.myToDos,this.doneToDos),t.printCards(this.myToDos,this.doneToDos,e,a)}};document.addEventListener("DOMContentLoaded",(()=>{n.updateAndRender(),[e,a].forEach((e=>{e.addEventListener("click",(e=>{const a=e.target.closest("button");if(a){const e=parseInt(a.getAttribute("data-index"),10),o=a.getAttribute("data-list");a.classList.contains("delete")?"active"===o?t.removeCard(n.myToDos,e):"done"===o&&t.removeCard(n.doneToDos,e):a.classList.contains("tick")&&("active"===o?t.changeDone(n.myToDos,e,n.doneToDos):"done"===o&&t.changeDone(n.doneToDos,e,n.myToDos)),n.updateAndRender()}}))})),document.addEventListener("blur",(e=>{const a=e.target;if(a.classList.contains("title")||a.classList.contains("notes")||a.classList.contains("due-date")){const e=parseInt(a.getAttribute("data-index"),10),o=a.getAttribute("data-list"),d=document.querySelector(`.title[data-index="${e}"][data-list="${o}"]`),s=document.querySelector(`.notes[data-index="${e}"][data-list="${o}"]`),i=document.querySelector(`.due-date[data-index="${e}"][data-list="${o}"]`);if(d&&s&&i){const a=d.textContent.trim(),c=s.innerHTML.replace(/<br>/g,"\n").trim(),l="INPUT"===i.tagName?i.value:new Date(i.textContent).toISOString();"active"===o?t.updateToDoData(n.myToDos,e,a,c,l):"done"===o&&t.updateToDoData(n.doneToDos,e,a,c,l),n.updateAndRender()}}}),!0),document.getElementById("pen").addEventListener("click",(()=>{n.addNewCard()}))}))})();